(()=>{var e={};e.id=931,e.ids=[931],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},3060:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>m,routeModule:()=>d,tree:()=>c});var r=s(7096),a=s(6132),i=s(7284),n=s.n(i),l=s(2564),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let c=["",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,3982)),"/Users/mzc01-kimkm95/Documents/project/mzc-account/test/app/page.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,5345)),"/Users/mzc01-kimkm95/Documents/project/mzc-account/test/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,9291,23)),"next/dist/client/components/not-found-error"]}],m=["/Users/mzc01-kimkm95/Documents/project/mzc-account/test/app/page.tsx"],x="/page",u={require:s,loadChunk:()=>Promise.resolve()},d=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/page",pathname:"/",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6082:(e,t,s)=>{Promise.resolve().then(s.bind(s,374))},374:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>Home});var r=s(784),a=s(9885),i=s(1145);let n=["인공지능","암호화폐","기후변화","우주탐사","전기차","메타버스","바이오테크","반도체"];function SearchForm({onSearch:e,loading:t}){let[s,i]=(0,a.useState)(""),handleTopicClick=s=>{t||(i(s),e(s))};return(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-responsive",children:[r.jsx("form",{onSubmit:t=>{t.preventDefault();let r=s.trim();if(r){let t=r.replace(/<[^>]*>/g,"");e(t)}},className:"mb-responsive",children:(0,r.jsxs)("div",{className:"flex-responsive",children:[r.jsx("input",{type:"text",value:s,onChange:e=>{let t=e.target.value,s=t.replace(/<script[^>]*>.*?<\/script>/gi,"").replace(/<[^>]*>/g,"");i(s)},placeholder:"관심 있는 주제를 입력하세요... (예: 인공지능, 암호화폐)",className:"search-input flex-1 min-w-0",disabled:t,maxLength:100,autoComplete:"off",spellCheck:"false",pattern:"[^<>]*",title:"HTML 태그는 사용할 수 없습니다"}),r.jsx("button",{type:"submit",disabled:t||!s.trim(),className:"btn-primary disabled:opacity-50 disabled:cursor-not-allowed whitespace-nowrap sm:min-w-[120px]",children:"뉴스 검색"})]})}),(0,r.jsxs)("div",{children:[r.jsx("h3",{className:"text-sm sm:text-base font-medium text-gray-700 mb-3 sm:mb-4",children:"인기 주제"}),r.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3",children:n.map(e=>r.jsx("button",{onClick:()=>handleTopicClick(e),disabled:t,className:"px-3 sm:px-4 py-1.5 sm:py-2 text-xs sm:text-sm bg-gray-100 hover:bg-primary-50 hover:text-primary-600 rounded-full transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed touch-manipulation min-h-[44px] flex items-center justify-center",children:e},e))})]})]})}function LoadingSpinner(){return r.jsx("div",{className:"flex justify-center items-center",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary-600"})})}function formatDate(e){let t=new Date(e),s=new Date,r=Math.abs(s.getTime()-t.getTime()),a=Math.ceil(r/864e5);return 1===a?"1일 전":a<7?`${a}일 전`:t.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric"})}function NewsCard({news:e,onSummarize:t,isLoading:s}){return(0,r.jsxs)("article",{className:"news-card",children:[(0,r.jsxs)("header",{className:"flex flex-col xs:flex-row xs:justify-between xs:items-start mb-4 gap-2",children:[r.jsx("h2",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 flex-1 leading-tight min-w-0",children:e.title}),r.jsx("span",{className:"text-xs sm:text-sm text-gray-500 font-medium whitespace-nowrap self-start xs:self-auto shrink-0",children:e.source})]}),r.jsx("p",{className:"text-gray-700 mb-4 text-sm sm:text-base lg:text-lg line-clamp-3 leading-relaxed",children:e.description}),!e.summary&&!s&&r.jsx("button",{onClick:()=>t(e.id),className:"mb-4 px-3 sm:px-4 py-2 sm:py-2.5 bg-primary-50 hover:bg-primary-100 active:bg-primary-200 text-primary-700 rounded-lg transition-colors duration-200 text-xs sm:text-sm font-medium w-full xs:w-auto touch-manipulation min-h-[44px] flex items-center justify-center",children:"\uD83E\uDD16 AI 요약하기"}),s&&(0,r.jsxs)("div",{className:"mb-4 flex items-center gap-3 p-3 sm:p-4 bg-gray-50 rounded-lg",children:[r.jsx(LoadingSpinner,{}),r.jsx("span",{className:"text-gray-600 text-xs sm:text-sm",children:"AI 요약 중..."})]}),e.summary&&(0,r.jsxs)("div",{className:"mb-4 p-3 sm:p-4 lg:p-5 bg-blue-50 border-l-4 border-blue-400 rounded-lg",children:[r.jsx("h3",{className:"text-xs sm:text-sm lg:text-base font-semibold text-blue-800 mb-2",children:"\uD83E\uDD16 AI 요약"}),r.jsx("p",{className:"text-blue-700 text-xs sm:text-sm lg:text-base leading-relaxed",children:e.summary})]}),(0,r.jsxs)("footer",{className:"flex flex-col xs:flex-row xs:justify-between xs:items-center gap-2 text-xs sm:text-sm text-gray-500 pt-2 border-t border-gray-100",children:[r.jsx("time",{dateTime:e.publishedAt,children:formatDate(e.publishedAt)}),e.url&&r.jsx("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",className:"text-primary-600 hover:text-primary-700 active:text-primary-800 font-medium self-start xs:self-auto transition-colors duration-200 touch-manipulation",children:"원문 보기 →"})]})]})}function Toast({message:e,type:t,duration:s=5e3,onClose:i}){let[n,l]=(0,a.useState)(!0);return(0,a.useEffect)(()=>{let e=setTimeout(()=>{l(!1),setTimeout(i,300)},s);return()=>clearTimeout(e)},[s,i]),r.jsx("div",{className:(()=>{let e="fixed top-4 right-4 z-50 max-w-sm w-full bg-white rounded-lg shadow-lg border-l-4 p-4 transition-all duration-300 transform";if(!n)return`${e} translate-x-full opacity-0`;switch(t){case"success":return`${e} border-green-500`;case"error":return`${e} border-red-500`;case"warning":return`${e} border-yellow-500`;case"info":return`${e} border-blue-500`;default:return`${e} border-gray-500`}})(),role:"alert","aria-live":"error"===t?"assertive":"polite","aria-atomic":"true",children:(0,r.jsxs)("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"text-lg","aria-hidden":"true",children:(()=>{switch(t){case"success":return"✅";case"error":return"❌";case"warning":return"⚠️";default:return"ℹ️"}})()})}),r.jsx("div",{className:"ml-3 flex-1",children:r.jsx("p",{className:`text-sm font-medium ${(()=>{switch(t){case"success":return"text-green-800";case"error":return"text-red-800";case"warning":return"text-yellow-800";case"info":return"text-blue-800";default:return"text-gray-800"}})()}`,children:e})}),r.jsx("div",{className:"ml-4 flex-shrink-0",children:r.jsx("button",{onClick:()=>{l(!1),setTimeout(i,300)},className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500 rounded p-1","aria-label":"알림 닫기",type:"button",children:r.jsx("svg",{className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})})]})})}function useToast(){let[e,t]=(0,a.useState)([]),s=(0,a.useCallback)(e=>{let s=Date.now().toString(),a={...e,id:s};t(e=>[...e,a]),setTimeout(()=>{r(s)},e.duration||5e3)},[]),r=(0,a.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),i=(0,a.useCallback)(()=>{t([])},[]),n=(0,a.useCallback)((e,t)=>{s({message:e,type:"success",duration:t})},[s]),l=(0,a.useCallback)((e,t)=>{s({message:e,type:"error",duration:t})},[s]),o=(0,a.useCallback)((e,t)=>{s({message:e,type:"warning",duration:t})},[s]),c=(0,a.useCallback)((e,t)=>{s({message:e,type:"info",duration:t})},[s]);return{toasts:e,addToast:s,removeToast:r,clearAllToasts:i,showSuccess:n,showError:l,showWarning:o,showInfo:c}}let l=[/<script[^>]*>.*?<\/script>/gi,/javascript:/gi,/on\w+\s*=/gi,/<iframe[^>]*>.*?<\/iframe>/gi,/data:text\/html/gi,/vbscript:/gi,/<object[^>]*>.*?<\/object>/gi,/<embed[^>]*>.*?<\/embed>/gi,/<link[^>]*>/gi,/<meta[^>]*>/gi],o=[/(\b(SELECT|INSERT|UPDATE|DELETE|DROP|CREATE|ALTER|EXEC|UNION)\b)/gi,/(--|\/\*|\*\/|;)/g,/(\bOR\b|\bAND\b).*?(\b=\b|\b<\b|\b>\b)/gi];function containsDangerousPatterns(e){return!!e&&"string"==typeof e&&(l.some(t=>t.test(e))||o.some(t=>t.test(e)))}function sanitizeText(e){return e&&"string"==typeof e?e.replace(/<[^>]*>/g,"").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&#x27;/g,"'").trim():""}function validateSearchTopic(e){if(!e||"string"!=typeof e)return{isValid:!1,error:"검색어를 입력해주세요."};let t=e.trim();if(0===t.length)return{isValid:!1,error:"검색어를 입력해주세요."};if(t.length<2)return{isValid:!1,error:"검색어는 2글자 이상 입력해주세요."};if(t.length>100)return{isValid:!1,error:"검색어는 100글자 이하로 입력해주세요."};if(containsDangerousPatterns(t))return{isValid:!1,error:"안전하지 않은 문자가 포함되어 있습니다."};let s=sanitizeText(t);return 0===s.length?{isValid:!1,error:"유효한 검색어를 입력해주세요."}:{isValid:!0,sanitizedTopic:s}}function getUserFriendlyErrorMessage(e,t){if(!e)return"알 수 없는 오류가 발생했습니다.";if("ECONNABORTED"===e.code)return"요청 시간이 초과되었습니다. 네트워크 연결을 확인해주세요.";if("ENOTFOUND"===e.code||"ECONNREFUSED"===e.code)return"서비스에 연결할 수 없습니다. 잠시 후 다시 시도해주세요.";let s=e.response?.status;return 400===s?"요청 형식이 올바르지 않습니다.":401===s?"search"===t?"API 인증에 실패했습니다.":"AI 서비스 인증에 실패했습니다.":403===s?"API 접근이 거부되었습니다.":429===s?"API 할당량이 초과되었습니다. 잠시 후 다시 시도해주세요.":503===s?"search"===t?"뉴스 서비스가 일시적으로 사용할 수 없습니다.":"AI 서비스가 일시적으로 사용할 수 없습니다.":s>=500?"서버에 일시적인 문제가 발생했습니다. 잠시 후 다시 시도해주세요.":"search"===t?"뉴스를 가져오는 중 오류가 발생했습니다.":"요약 생성 중 오류가 발생했습니다."}function Home(){let[e,t]=(0,a.useState)([]),[s,n]=(0,a.useState)(!1),[l,o]=(0,a.useState)(""),[c,m]=(0,a.useState)(new Set),[x,u]=(0,a.useState)({}),{toasts:d,removeToast:p,clearAllToasts:g,showSuccess:h,showError:b,showWarning:f,showInfo:y}=useToast(),handleSearch=async(e,s=!1)=>{let r=validateSearchTopic(e);if(!r.isValid){f(r.error);return}let a=r.sanitizedTopic;s||(g(),u(e=>({...e,search:0}))),n(!0),o(a);try{let e=await i.Z.post("/api/news",{topic:a},{timeout:12e3,headers:{"Content-Type":"application/json"}});e.data.success?(t(e.data.news),u(e=>({...e,search:0})),e.data.news.length>0?h(`"${a}" 관련 뉴스 ${e.data.news.length}개를 찾았습니다.`):y(`"${a}"에 대한 뉴스를 찾을 수 없습니다. 다른 키워드로 검색해보세요.`)):(console.error("뉴스 검색 실패:",e.data.error),b(e.data.error||"뉴스를 가져오는 중 오류가 발생했습니다."))}catch(n){console.error("뉴스 검색 에러:",n);let e=x.search||0,t=e<2&&!s,r=getUserFriendlyErrorMessage(n,"search"),i=["ECONNABORTED","ENOTFOUND","ECONNREFUSED"].includes(n.code)||[503,500,502,504].includes(n.response?.status)||!navigator.onLine;t&&i?(b(`${r} 자동으로 다시 시도합니다... (${e+1}/3)`),u(t=>({...t,search:e+1})),setTimeout(()=>{handleSearch(a,!0)},3e3)):b(r)}finally{n(!1)}},handleSummarize=async(s,r=!1)=>{let a=e.find(e=>e.id===s);if(!a){b("뉴스 정보를 찾을 수 없습니다.");return}if(a.summary){y("이미 요약이 완료된 뉴스입니다.");return}if(c.has(s)){f("이미 요약을 진행 중입니다.");return}if(!a.title?.trim()||!a.description?.trim()){b("요약할 수 있는 충분한 내용이 없습니다.");return}m(e=>new Set(Array.from(e).concat(s))),r||u(e=>({...e,[s]:0}));try{let e=await i.Z.post("/api/summarize",{title:a.title,description:a.description,content:a.content},{timeout:35e3,headers:{"Content-Type":"application/json"}});e.data.success?(t(t=>t.map(t=>t.id===s?{...t,summary:e.data.summary}:t)),u(e=>({...e,[s]:0})),h("AI 요약이 완료되었습니다!")):(console.error("요약 실패:",e.data.error),b(e.data.error||"요약 생성 중 오류가 발생했습니다."))}catch(n){console.error("요약 에러:",n);let e=x[s]||0,t=e<2&&!r,a=getUserFriendlyErrorMessage(n,"summarize"),i=["ECONNABORTED","ENOTFOUND","ECONNREFUSED"].includes(n.code)||[503,500,502,504].includes(n.response?.status)||!navigator.onLine;t&&i?(b(`${a} 자동으로 다시 시도합니다... (${e+1}/3)`),u(t=>({...t,[s]:e+1})),setTimeout(()=>{handleSummarize(s,!0)},5e3)):b(a)}finally{m(e=>{let t=new Set(e);return t.delete(s),t})}};return(0,r.jsxs)(r.Fragment,{children:[d.map(e=>r.jsx(Toast,{message:e.message,type:e.type,duration:e.duration,onClose:()=>p(e.id)},e.id)),(0,r.jsxs)("div",{className:"container mx-auto container-responsive py-6 sm:py-8 lg:py-12 max-w-4xl min-h-screen",children:[(0,r.jsxs)("header",{className:"text-center mb-responsive",children:[r.jsx("h1",{className:"text-3xl sm:text-4xl lg:text-5xl xl:text-6xl font-bold text-gray-900 mb-3 sm:mb-4 lg:mb-6",children:"\uD83E\uDD16 AI 뉴스 브리핑"}),r.jsx("p",{className:"text-base sm:text-lg lg:text-xl text-gray-600 px-2 max-w-2xl mx-auto leading-relaxed",children:"관심 있는 주제의 최신 뉴스를 검색하고 AI가 요약해드립니다"})]}),r.jsx("section",{className:"mb-responsive",children:r.jsx(SearchForm,{onSearch:handleSearch,loading:s})}),s&&(0,r.jsxs)("section",{className:"text-center py-8 sm:py-12 lg:py-16",children:[r.jsx(LoadingSpinner,{}),(0,r.jsxs)("p",{className:"mt-4 text-gray-600 text-sm sm:text-base lg:text-lg px-4 max-w-md mx-auto",children:['"',l,'" 관련 뉴스를 검색하고 있습니다...']})]}),!s&&e.length>0&&(0,r.jsxs)("main",{children:[(0,r.jsxs)("h2",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-4 sm:mb-6 lg:mb-8 px-2",children:['"',l,'" 검색 결과 (',e.length,"개)"]}),r.jsx("div",{className:"space-y-4 sm:space-y-6 lg:space-y-8",children:e.map(e=>r.jsx(NewsCard,{news:e,onSummarize:handleSummarize,isLoading:c.has(e.id)},e.id))})]}),!s&&l&&0===e.length&&r.jsx("section",{className:"text-center py-8 sm:py-12 lg:py-16",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4",children:[r.jsx("div",{className:"text-6xl sm:text-7xl lg:text-8xl mb-4 opacity-50",children:"\uD83D\uDCF0"}),(0,r.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg",children:['"',l,'"에 대한 뉴스를 찾을 수 없습니다.']}),r.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mt-2",children:"다른 키워드로 검색해보세요."})]})}),!s&&!l&&r.jsx("section",{className:"text-center py-8 sm:py-12 lg:py-16",children:(0,r.jsxs)("div",{className:"max-w-md mx-auto px-4",children:[r.jsx("div",{className:"text-6xl sm:text-7xl lg:text-8xl mb-4 opacity-50",children:"\uD83D\uDD0D"}),r.jsx("p",{className:"text-gray-600 text-sm sm:text-base lg:text-lg",children:"관심 있는 주제를 검색해보세요!"}),r.jsx("p",{className:"text-gray-500 text-xs sm:text-sm mt-2",children:"인기 주제 버튼을 클릭하거나 직접 입력해보세요."})]})})]})]})}},3982:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>i,default:()=>o});var r=s(5153);let a=(0,r.createProxy)(String.raw`/Users/mzc01-kimkm95/Documents/project/mzc-account/test/app/page.tsx`),{__esModule:i,$$typeof:n}=a,l=a.default,o=l}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[214,751,845],()=>__webpack_exec__(3060));module.exports=s})();