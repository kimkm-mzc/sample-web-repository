"use strict";(()=>{var e={};e.id=764,e.ids=[764],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},3685:e=>{e.exports=require("http")},5687:e=>{e.exports=require("https")},7561:e=>{e.exports=require("node:fs")},4492:e=>{e.exports=require("node:stream")},2477:e=>{e.exports=require("node:stream/web")},1017:e=>{e.exports=require("path")},4577:e=>{e.exports=require("punycode")},2781:e=>{e.exports=require("stream")},7310:e=>{e.exports=require("url")},3837:e=>{e.exports=require("util")},1267:e=>{e.exports=require("worker_threads")},9796:e=>{e.exports=require("zlib")},810:(e,r,s)=>{s.r(r),s.d(r,{headerHooks:()=>d,originalPathname:()=>A,requestAsyncStorage:()=>p,routeModule:()=>c,serverHooks:()=>l,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>x});var t={};s.r(t),s.d(t,{POST:()=>POST});var o=s(884),u=s(6132),a=s(5798),n=s(1369),i=s(6696);async function POST(e){try{let r=await e.json(),{title:s,description:t,content:o}=r,u=(0,i.AD)({title:s,description:t,content:o});if(!u.isValid)return a.Z.json({success:!1,error:u.error},{status:400});let{title:c,description:p,content:m}=u.sanitizedData,l=process.env.OPENAI_API_KEY;if(!l)return a.Z.json({success:!1,error:"OpenAI API 키가 설정되지 않았습니다."},{status:500});let d=new n.ZP({apiKey:l}),x=m?`제목: ${c}

내용: ${p}

상세: ${m}`:`제목: ${c}

내용: ${p}`;try{let e=await d.chat.completions.create({model:"gpt-4o-mini",messages:[{role:"system",content:"당신은 뉴스 요약 전문가입니다. 주어진 뉴스 기사를 2-3문장으로 간결하고 명확하게 요약해주세요. 핵심 내용과 중요한 정보만 포함하여 한국어로 답변해주세요."},{role:"user",content:x}],max_tokens:200,temperature:.3}),r=e.choices[0]?.message?.content?.trim();if(!r)return a.Z.json({success:!1,error:"요약을 생성할 수 없습니다."},{status:500});return a.Z.json({success:!0,summary:r})}catch(e){if(console.error("OpenAI API 에러:",e),429===e.status)return a.Z.json({success:!1,error:"API 할당량이 초과되었습니다. 잠시 후 다시 시도해주세요."},{status:429});if(401===e.status)return a.Z.json({success:!1,error:"API 인증에 실패했습니다."},{status:401});if(400===e.status)return a.Z.json({success:!1,error:"요청 형식이 올바르지 않습니다."},{status:400});if(403===e.status)return a.Z.json({success:!1,error:"API 접근이 거부되었습니다."},{status:403});else if(503===e.status)return a.Z.json({success:!1,error:"AI 서비스가 일시적으로 사용할 수 없습니다."},{status:503});else if("ECONNABORTED"===e.code)return a.Z.json({success:!1,error:"요청 시간이 초과되었습니다."},{status:408});else if("ENOTFOUND"===e.code||"ECONNREFUSED"===e.code)return a.Z.json({success:!1,error:"AI 서비스에 연결할 수 없습니다."},{status:503});else if(e.status>=500)return a.Z.json({success:!1,error:"AI 서비스에 일시적인 문제가 발생했습니다."},{status:503});return a.Z.json({success:!1,error:"요약 생성 중 오류가 발생했습니다."},{status:500})}}catch(e){return console.error("요약 API 에러:",e),a.Z.json({success:!1,error:"요약 처리 중 오류가 발생했습니다."},{status:500})}}let c=new o.AppRouteRouteModule({definition:{kind:u.x.APP_ROUTE,page:"/api/summarize/route",pathname:"/api/summarize",filename:"route",bundlePath:"app/api/summarize/route"},resolvedPagePath:"/Users/mzc01-kimkm95/Documents/project/mzc-account/test/app/api/summarize/route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:p,staticGenerationAsyncStorage:m,serverHooks:l,headerHooks:d,staticGenerationBailout:x}=c,A="/api/summarize/route"}};var r=require("../../../webpack-runtime.js");r.C(e);var __webpack_exec__=e=>r(r.s=e),s=r.X(0,[997,605,369,696],()=>__webpack_exec__(810));module.exports=s})();